{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/gotre/projects/lupita/pages/index.js\";\nimport Head from 'next/head';\nimport { useState } from 'react';\nimport axios from 'axios';\nimport styles from '../styles/Home.module.css';\nimport { UiFileInputButton } from \"../components/UiFileInputButton\";\nconst config = {\n  headers: {\n    'content-type': 'multipart/form-data'\n  }\n};\n\nconst getVendor = data => {\n  const field = {}; // const field = data.data.summary.find(line => line.type == 'VENDOR_NAME') || {};\n\n  return field.value || 'No detectado';\n};\n\nconst getDate = data => {\n  const field = {}; // const field = data.data.summary.find(line => line.type == 'INVOICE_RECEIPT_DATE') || {};\n\n  return field.value || 'No detectado';\n};\n\nconst getTotal = data => {\n  const field = {}; // const field = data.data.summary.find(line => line.type == 'TOTAL') || {};\n\n  return field.value || 'No detectado';\n};\n\nconst getInvoiceId = data => {\n  const field = {}; // const field = data.data.summary.find(line => line.type == 'INVOICE_RECEIPT_ID') || {};\n\n  return field.value || 'No detectado';\n};\n\nexport default function Home() {\n  const {\n    0: src,\n    1: setSrc\n  } = useState('');\n  const {\n    0: data,\n    1: setData\n  } = useState(null);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n\n  const onChange = async formData => {\n    setLoading(true);\n    setData(null);\n    setSrc('');\n    const reader = new FileReader();\n\n    reader.onloadend = function () {\n      setSrc(reader.result);\n    };\n\n    reader.readAsDataURL(formData.get('image'));\n    const response = await axios.post('/api/upload-file', formData, config);\n    setLoading(false);\n    setData(response.data);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Create Next App\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.ico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: styles.main,\n      children: [/*#__PURE__*/_jsxDEV(UiFileInputButton, {\n        label: \"Subir imagen\",\n        uploadFileName: \"image\",\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 29\n      }, this), !loading && src && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.image,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: src,\n          alt: \"ticket\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 67\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 37\n      }, this), data && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Nombre fiscal: \", getVendor(data)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Fecha factura: \", getDate(data)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Total: \", getTotal(data)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Numero factura: \", getInvoiceId(data)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n          children: JSON.stringify(data, null, 2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n}","map":{"version":3,"sources":["/Users/gotre/projects/lupita/pages/index.js"],"names":["Head","useState","axios","styles","UiFileInputButton","config","headers","getVendor","data","field","value","getDate","getTotal","getInvoiceId","Home","src","setSrc","setData","loading","setLoading","onChange","formData","reader","FileReader","onloadend","result","readAsDataURL","get","response","post","container","main","image","JSON","stringify"],"mappings":"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","sourcesContent":["import Head from 'next/head'\nimport { useState } from 'react';\nimport axios from 'axios';\n\nimport styles from '../styles/Home.module.css'\nimport {UiFileInputButton} from \"../components/UiFileInputButton\";\n\n\nconst config = {\n    headers: { 'content-type': 'multipart/form-data' },\n};\n\nconst getVendor = data => {\n    const field = {}\n    // const field = data.data.summary.find(line => line.type == 'VENDOR_NAME') || {};\n    return field.value || 'No detectado';\n}\n\nconst getDate = data => {\n    const field = {}\n    // const field = data.data.summary.find(line => line.type == 'INVOICE_RECEIPT_DATE') || {};\n    return field.value || 'No detectado';\n}\n\nconst getTotal = data => {\n    const field = {}\n    // const field = data.data.summary.find(line => line.type == 'TOTAL') || {};\n    return field.value || 'No detectado';\n}\n\nconst getInvoiceId = data => {\n    const field = {}\n    // const field = data.data.summary.find(line => line.type == 'INVOICE_RECEIPT_ID') || {};\n    return field.value || 'No detectado';\n}\n\nexport default function Home() {\n    const [src, setSrc] = useState('');\n    const [data, setData] = useState(null);\n    const [loading, setLoading] = useState(false);\n\n    const onChange = async (formData) => {\n        setLoading(true);\n        setData(null);\n        setSrc('');\n        const reader = new FileReader();\n        reader.onloadend = function() {\n            setSrc(reader.result);\n        }\n        reader.readAsDataURL(formData.get('image'));\n\n        const response = await axios.post('/api/upload-file', formData, config);\n        setLoading(false);\n        setData(response.data);\n    }\n\n    return (\n        <div className={styles.container}>\n            <Head>\n                <title>Create Next App</title>\n                <link rel=\"icon\" href=\"/favicon.ico\" />\n            </Head>\n\n            <main className={styles.main}>\n                <UiFileInputButton\n                      label=\"Subir imagen\"\n                      uploadFileName=\"image\"\n                      onChange={onChange}\n                />\n                {loading && <p>Loading...</p>}\n                {!loading && src && <div className={styles.image}><img src={src} alt=\"ticket\"/></div>}\n                {data &&\n                    (<>\n                        <p>Nombre fiscal: {getVendor(data)}</p>\n                        <p>Fecha factura: {getDate(data)}</p>\n                        <p>Total: {getTotal(data)}</p>\n                        <p>Numero factura: {getInvoiceId(data)}</p>\n                        <pre>{JSON.stringify(data, null, 2)}</pre>\n                    </>)\n                }\n            </main>\n\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}